<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CivicConnect  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="CivicConnect  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          CivicConnect Docs
        </a>
         (79% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/civic-community/">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">CivicConnect Reference</a>
      <img class="carat" src="img/carat.png" />
      CivicConnect  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Connect.html">Connect</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ConnectButton.html">ConnectButton</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ConnectError.html">ConnectError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/UserData.html">UserData</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/UserInfo.html">UserInfo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ConnectStatus.html">ConnectStatus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ScopeRequestType.html">ScopeRequestType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Bundle.html">Bundle</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CCConnectDelegate.html">CCConnectDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ConnectBundle.html">ConnectBundle</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ConnectDelegate.html">ConnectDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='ios-civic-connect' class='heading'>iOS Civic Connect</h1>

<p><a href="https://circleci.com/gh/civicteam/civic-connect-ios-public"><img src="https://circleci.com/gh/civicteam/civic-connect-ios-public.svg?style=svg&circle-token=c354636aa17d0a8e4d67046086a0071f2bda1172" alt="CircleCI"></a></p>

<p><a href="https://cocoapods.org/pods/CivicConnect"><img src="https://img.shields.io/cocoapods/v/CivicConnect.svg?style=flat" alt="Version"></a><br>
<a href="https://cocoapods.org/pods/CivicConnect"><img src="https://img.shields.io/cocoapods/l/CivicConnect.svg?style=flat" alt="License"></a><br>
<a href="https://cocoapods.org/pods/CivicConnect"><img src="https://img.shields.io/cocoapods/p/CivicConnect.svg?style=flat" alt="Platform"></a></p>

<p>CivicConnect is a library that allows a third party to connect with the Civic Secure Identity iOS app.</p>
<h2 id='introduction' class='heading'>Introduction</h2>

<p>This library allows you to connect to the Civic Secure Identity iOS application using the integration portal API. In order to use this library you will need to register yourself on the <a href="https://integrate.civic.com/login">Integration Portal</a>. Once registered you&rsquo;ll be able to provide the necessary information to the library to be able to connect your own iOS application to the Civic Secure Identity iOS application. The library also provides a Civic styled button that can be customized for your needs, or you could rather initiate the flow in any way you see fit for your application.</p>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>iOS 8.0+</li>
<li>Xcode 10+</li>
<li>Swift 4+</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='cocoapods' class='heading'>Cocoapods</h3>

<p>CivicConnect is available through <a href="https://cocoapods.org">CocoaPods</a>. To install
it, simply add the following line to your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'CivicConnect'</span>
</code></pre>
<h3 id='carthage' class='heading'>Carthage</h3>

<p>To integrate CivicConnect into your Xcode project using Carthage, specify it in your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "civicteam/civic-connect-ios-public"
</code></pre>

<p>Run <code>carthage update</code> to build the framework and drag the built CivicConnect.framework into your Xcode project.</p>
<h2 id='getting-started' class='heading'>Getting Started</h2>
<h3 id='sample-app' class='heading'>Sample App</h3>

<p>To run the example project, clone the repo, and run <code>pod install</code>. Open up <code>CivicConnect.xcworkspace</code> with Xcode, in the <code>Info.plist</code> you will need to provide your  <code>CivicApplicationIdentifier</code> and <code>CivicSecret</code> and run the <code>CivicConnect-Example</code> scheme. The sample project contains documented code to illustrate how to use the library.</p>
<h3 id='usage' class='heading'>Usage</h3>

<p>This library is supported for both Objective-C and Swift and therefore each code snippet will contain its corresponding Objective-C and Swift section.</p>
<h4 id='initialization' class='heading'>Initialization</h4>

<p>Before being able to use the library, you will need to initialize it with the correct fields These values can be found on the <a href="https://integrate.civic.com/login">Integration Portal</a> when you have registered your application. Initializing the library requires the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Application Identifier</td>
<td>Yes</td>
<td>Identifier used to identify the third party.</td>
</tr>
<tr>
<td>Mobile Application Identifier</td>
<td>Yes</td>
<td>Identifier used by the mobile app.</td>
</tr>
<tr>
<td>Secret</td>
<td>Yes</td>
<td>Secret provided to the partner via the Integration Portal.</td>
</tr>
<tr>
<td>Redirect Scheme</td>
<td>No</td>
<td>Scheme used to open the third party app. (This requires the third party to add a <code>URL Types</code> scheme in the <code>Info.plist</code> file.</td>
</tr>
<tr>
<td>DevMode</td>
<td>No</td>
<td>Whether the SDK will use the development environment or not.</td>
</tr>
</tbody></table>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">connect</span> <span class="o">=</span> <span class="kt">Connect</span><span class="p">(</span><span class="nv">applicationIdentifier</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">APPLICATION</span> <span class="kt">IDENTIFIER</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span> 
                      <span class="nv">mobileApplicationIdentifier</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">MOBILE</span> <span class="kt">APPLICATION</span> <span class="kt">IDENTIFIER</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span> 
                      <span class="nv">secret</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">SECRET</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="nv">redirectScheme</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">REDIRECT</span> <span class="kt">SCHEME</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">)</span>

<span class="c1">// OR</span>

<span class="k">let</span> <span class="nv">connect</span> <span class="o">=</span> <span class="kt">Connect</span><span class="p">(</span><span class="nv">applicationIdentifier</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">APPLICATION</span> <span class="kt">IDENTIFIER</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span> 
                      <span class="nv">mobileApplicationIdentifier</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">MOBILE</span> <span class="kt">APPLICATION</span> <span class="kt">IDENTIFIER</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span> 
                      <span class="nv">secret</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">SECRET</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="nv">redirectScheme</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">REDIRECT</span> <span class="kt">SCHEME</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="nv">devMode</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">DEV</span> <span class="kt">MODE</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="n">CCConnect</span> <span class="o">*</span><span class="n">connect</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CCConnect</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithApplicationIdentifier</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">APPLICATION</span> <span class="n">IDENTIFIER</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                          <span class="nf">mobileApplicationIdentifier</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">MOBILE</span> <span class="n">APPLICATION</span> <span class="n">IDENTIFIER</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                               <span class="n">secret</span><span class="o">:&lt;</span><span class="n">INSERT</span> <span class="n">SECRET</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                       <span class="n">redirectScheme</span><span class="o">:&lt;</span><span class="n">INSERT</span> <span class="n">REDIRECT</span> <span class="n">SCHEME</span> <span class="n">HERE</span><span class="o">&gt;</span><span class="p">];</span>

<span class="c1">// OR
</span>
<span class="n">CCConnect</span> <span class="o">*</span><span class="n">connect</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CCConnect</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithApplicationIdentifier</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">APPLICATION</span> <span class="n">IDENTIFIER</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                          <span class="nf">mobileApplicationIdentifier</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">MOBILE</span> <span class="n">APPLICATION</span> <span class="n">IDENTIFIER</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                               <span class="n">secret</span><span class="o">:&lt;</span><span class="n">INSERT</span> <span class="n">SECRET</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                       <span class="n">redirectScheme</span><span class="o">:&lt;</span><span class="n">INSERT</span> <span class="n">REDIRECT</span> <span class="n">SCHEME</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                              <span class="n">devMode</span><span class="o">:&lt;</span><span class="n">INSERT</span> <span class="n">DEV</span> <span class="n">MODE</span> <span class="n">HERE</span><span class="o">&gt;</span><span class="p">];</span>
</code></pre>

<p>A convenient way to initialize the library is to load the fields via the <code>Info.plist</code>:</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">connect</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Connect</span><span class="o">.</span><span class="nf">initialize</span><span class="p">(</span><span class="nv">withBundle</span><span class="p">:</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="p">)</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">;</span>
<span class="n">NSBundle</span> <span class="o">*</span><span class="n">bundle</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSBundle</span> <span class="nf">mainBundle</span><span class="p">];</span>
<span class="n">CCConnect</span> <span class="o">*</span><span class="n">connect</span> <span class="o">=</span> <span class="p">[</span><span class="n">CCConnect</span> <span class="nf">initializeWithBundle</span><span class="p">:</span><span class="n">bundle</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</code></pre>

<p>The library will look through the <code>Info.plist</code> to find the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>CFBundleIdentifier (Bundle Identifier - By default this should already exist)</td>
<td><code>String</code></td>
<td>Yes</td>
</tr>
<tr>
<td>CivicApplicationIdentifier</td>
<td><code>String</code></td>
<td>Yes</td>
</tr>
<tr>
<td>CivicSecret</td>
<td><code>String</code></td>
<td>Yes</td>
</tr>
<tr>
<td>CivicRedirectScheme</td>
<td><code>String</code></td>
<td>No</td>
</tr>
<tr>
<td>CivicDevMode</td>
<td><code>Boolean</code></td>
<td>No</td>
</tr>
</tbody></table>

<p>Please note: <code>CivicRedirectScheme</code> requires you to add a <code>URL Type</code> to the <code>Info.plist</code> with an identifier and at least one scheme. The scheme needs to be equal to the <code>CivicRedirectScheme</code> field.</p>

<p>Loading the fields from the <code>Info.plist</code> can throw the following errors if it cannot find the particular field:</p>

<table><thead>
<tr>
<th>Error</th>
<th>Status Code</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>cannotFindApplicationId</td>
<td>901</td>
<td>Cannot find application ID. Make sure you have &lsquo;CivicApplicationIdentifier&rsquo; somewhere in your Info.plist.</td>
</tr>
<tr>
<td>cannotFindBundleId</td>
<td>902</td>
<td>Cannot find bundle ID. Make sure you have &lsquo;CFBundleIdentifier&rsquo; somewhere in your Info.plist.</td>
</tr>
<tr>
<td>cannotFindSecret</td>
<td>903</td>
<td>Cannot find secret. Make sure you have &lsquo;CivicSecret&rsquo; somewhere in your Info.plist.</td>
</tr>
<tr>
<td>redirectSchemeMismatch</td>
<td>904</td>
<td>Cannot find a matching URL scheme for &lsquo;CivicRedirectScheme&rsquo;. Please ensure &lsquo;CivicRedirectScheme&rsquo; matches one of the &lsquo;CFBundleURLTypes&rsquo; &lsquo;CFBundleURLSchemes&rsquo;.</td>
</tr>
</tbody></table>
<h4 id='connecting' class='heading'>Connecting</h4>

<p>Once you have an initialized instance of the <code><a href="Classes/Connect.html">Connect</a></code> class, you&rsquo;ll be able to start the connection between your application and Civic. To initiate a flow, you can use the <code><a href="Classes/Connect.html#/s:12CivicConnect0B0C7connect8withType8delegateyAA012ScopeRequestE0O_AA0B8Delegate_ptF">Connect.connect(withType:delegate:)</a></code> method:</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="n">connect</span><span class="o">.</span><span class="nf">connect</span><span class="p">(</span><span class="nv">withType</span><span class="p">:</span> <span class="o">.</span><span class="n">basic</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">connect</span> <span class="nf">connectWithType</span><span class="p">:</span><span class="n">CCScopeRequestTypeBasic</span> <span class="nf">delegate</span><span class="p">:</span><span class="n">self</span><span class="p">];</span>
</code></pre>

<p>To determine what type to use, you&rsquo;ll need to know what information you require. The following table shows what information the types provide:</p>

<table><thead>
<tr>
<th>Scope Request Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code><a href="Enums/ScopeRequestType.html#/c:@M@CivicConnect@E@CCScopeRequestType@CCScopeRequestTypeBasicSignup">ScopeRequestType.basicSignup</a></code></td>
<td>Includes basic information such as <code>email</code> and <code>phone number</code>.</td>
</tr>
<tr>
<td><code><a href="Enums/ScopeRequestType.html#/c:@M@CivicConnect@E@CCScopeRequestType@CCScopeRequestTypeAnonymousLogin">ScopeRequestType.anonymousLogin</a></code></td>
<td>Only includes the user ID.</td>
</tr>
<tr>
<td><code><a href="Enums/ScopeRequestType.html#/c:@M@CivicConnect@E@CCScopeRequestType@CCScopeRequestTypeProofOfResidence">ScopeRequestType.proofOfResidence</a></code></td>
<td>Includes the basic information, <code>identity document</code> and <code>residential documents</code> of the user.</td>
</tr>
<tr>
<td><code><a href="Enums/ScopeRequestType.html#/c:@M@CivicConnect@E@CCScopeRequestType@CCScopeRequestTypeProofOfIdentity">ScopeRequestType.proofOfIdentity</a></code></td>
<td>Includes basic information such as <code>email</code> and <code>phone number</code> as well as information on an <code>identity document</code>.</td>
</tr>
<tr>
<td><code><a href="Enums/ScopeRequestType.html#/c:@M@CivicConnect@E@CCScopeRequestType@CCScopeRequestTypeProofOfAge">ScopeRequestType.proofOfAge</a></code></td>
<td>Includes the age of the user.</td>
</tr>
</tbody></table>

<p>The delegate is the way the library communicates back to the partner via the following methods:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>func connectDidFailWithError(_ error: ConnectError)</code></td>
<td>This method is fired off when an error occurs inside the <code>ConnectSession</code> due to service errors, session errors, etc.</td>
</tr>
<tr>
<td><code>func connectDidFinishWithUserId(_ userId: String, andUserInfo userInfo: [UserInfo])</code></td>
<td>This method is fired off when the <code>ConnectSession</code> has retrieved the user data from the servers.</td>
</tr>
<tr>
<td><code>func connectDidChangeStatus(_ newStatus: ConnectStatus)</code></td>
<td>This method is fired off when the state of the <code>ConnectSession</code> changes. It provides an easy way to know what is happening in the background.</td>
</tr>
</tbody></table>

<p>After connecting with Civic, a <code>ConnectSession</code> is created to handle the connection between the partner app and Civic. Once the <code>ConnectSession</code> is created, you have two ways of handling the session. Either handling the <code>URL</code> that was used to open the partner app via the <code><a href="Classes/Connect.html#/c:@M@CivicConnect@objc(cs)CCConnect(im)handleUrl:">Connect.handle(url:)</a></code> method or by calling the <code><a href="Classes/Connect.html#/c:@M@CivicConnect@objc(cs)CCConnect(im)startPollingForUserData">Connect.startPollingForUserData()</a></code> method. These methods will be described below.</p>
<h4 id='handling-code-url-code' class='heading'>Handling <code>URL</code></h4>

<p>Handling a <code>URL</code> will allow the library to determine whether the Civic application opened up/redirected to the partner application and start retrieving the user data. In order for this feature to work, you must setup a <code>URL Type</code> with a <code>URL Scheme</code> in the <code>Info.plist</code>. (See the example project to see how this is done) </p>

<p>A convenient place to handle the <code>URL</code> is in the <code>AppDelegate</code> on the <code>func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -&gt; Bool</code> method as follows:</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">app</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="kd">open</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationOpenURLOptionsKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:])</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">connect</span><span class="o">.</span><span class="nf">handle</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">openURL</span><span class="p">:(</span><span class="n">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="nv">url</span> <span class="nf">sourceApplication</span><span class="p">:(</span><span class="n">nullable</span> <span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">sourceApplication</span> <span class="nf">annotation</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">annotation</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">connect</span> <span class="nf">handleUrl</span><span class="p">:</span><span class="n">url</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

<p>Internally this will check if the <code>URL</code> was initiated from the Civic application. You can manually check the <code>URL</code> via <code><a href="Classes/Connect.html#/c:@M@CivicConnect@objc(cs)CCConnect(im)canHandleUrl:">Connect.canHandle(url:)</a></code>. If the session can handle the <code>URL</code> then it will call <code><a href="Classes/Connect.html#/c:@M@CivicConnect@objc(cs)CCConnect(im)startPollingForUserData">Connect.startPollingForUserData()</a></code> internally.</p>
<h4 id='start-polling-for-user-data' class='heading'>Start Polling For User Data</h4>

<p>If you do not choose to handle the <code>URL</code> method or you would prefer not to use the redirect mechanism, you can rather choose to start polling for the user data manually. When calling this method, it will initiate a timer that contantly checks when the Civic application has finished the flow.</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="n">connect</span><span class="o">.</span><span class="nf">startPollingForUserData</span><span class="p">()</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight swift"><code><span class="p">[</span><span class="n">connect</span> <span class="n">startPollingForUserData</span><span class="p">];</span>
</code></pre>
<h4 id='stop-polling-for-user-data' class='heading'>Stop Polling For User Data</h4>

<p>At anytime the session is started, you can call <code><a href="Classes/Connect.html#/c:@M@CivicConnect@objc(cs)CCConnect(im)stopPollingForUserData">Connect.stopPollingForUserData()</a></code> to invalidate the timer.</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="n">connect</span><span class="o">.</span><span class="nf">stopPollingForUserData</span><span class="p">()</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">connect</span> <span class="nf">stopPollingForUserData</span><span class="p">];</span>
</code></pre>
<h4 id='reset' class='heading'>Reset</h4>

<p>You can reset the status of the of <code><a href="Classes/Connect.html">Connect</a></code> instance by calling the <code><a href="Classes/Connect.html#/c:@M@CivicConnect@objc(cs)CCConnect(im)reset">Connect.reset()</a></code> function.</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="n">connect</span><span class="o">.</span><span class="nf">reset</span><span class="p">()</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">connect</span> <span class="nf">reset</span><span class="p">];</span>
</code></pre>
<h4 id='connect-button' class='heading'>Connect Button</h4>

<p>If you would like a Civic styled button, you can use the <code><a href="Classes/ConnectButton.html">ConnectButton</a></code> class which is just a subclass of <code>UIButton</code>. In order to create one, you will need to provide a <code><a href="Classes/Connect.html">Connect</a></code> instance, a <code><a href="Protocols/ConnectDelegate.html">ConnectDelegate</a></code> and optionally the <code><a href="Enums/ScopeRequestType.html">ScopeRequestType</a></code>:</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">connectButton</span> <span class="o">=</span> <span class="kt">ConnectButton</span><span class="p">(</span><span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">CONNECT</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span> 
                                  <span class="nv">type</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">SCOPE</span> <span class="kt">REQUEST</span> <span class="kt">TYPE</span> <span class="kt">HERE</span> <span class="p">(</span><span class="kt">DEFAULTS</span> <span class="kt">TO</span> <span class="o">.</span><span class="n">basic</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span> 
                                  <span class="nv">delegate</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">CONNECT</span> <span class="kt">DELEGATE</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="n">CCConnectButton</span> <span class="o">*</span><span class="n">connectButton</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CCConnectButton</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithConnect</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">CONNECT</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                                     <span class="nf">type</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">SCOPE</span> <span class="n">REQUEST</span> <span class="n">TYPE</span> <span class="n">HERE</span><span class="o">&gt;</span>
                                                                 <span class="n">delegate</span><span class="o">:&lt;</span><span class="n">INSERT</span> <span class="n">CONNECT</span> <span class="n">DELEGATE</span> <span class="n">HERE</span><span class="o">&gt;</span><span class="p">];</span>
</code></pre>

<p>Once created, you can customize the title and image of the button:</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="n">connectButton</span><span class="o">.</span><span class="nf">setConnectTitle</span><span class="p">(</span><span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">TITLE</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">image</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">IMAGE</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">connectButton</span><span class="o">.</span><span class="nf">setConnectTitle</span><span class="p">(</span><span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">TITLE</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">connectButton</span> <span class="nf">setConnectTitle</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">TITLE</span> <span class="n">HERE</span><span class="o">&gt;</span> <span class="nf">image</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">IMAGE</span> <span class="n">HERE</span><span class="o">&gt;</span><span class="p">];</span>
<span class="p">[</span><span class="n">connectButton</span> <span class="nf">setConnectTitle</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">TITLE</span> <span class="n">HERE</span><span class="o">&gt;</span><span class="p">];</span>
</code></pre>

<p>The scope request type can also be changed at anytime:</p>
<h5 id='swift' class='heading'>Swift</h5>
<pre class="highlight swift"><code><span class="n">connectButton</span><span class="o">.</span><span class="nf">setType</span><span class="p">(</span><span class="o">&lt;</span><span class="kt">INSERT</span> <span class="kt">SCOPE</span> <span class="kt">REQUEST</span> <span class="kt">TYPE</span> <span class="kt">HERE</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>
<h5 id='objective-c' class='heading'>Objective-C</h5>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">connectButton</span> <span class="nf">setType</span><span class="p">:</span><span class="o">&lt;</span><span class="n">INSERT</span> <span class="n">SCOPE</span> <span class="n">REQUEST</span> <span class="n">TYPE</span> <span class="n">HERE</span><span class="o">&gt;</span><span class="p">];</span>
</code></pre>

<p>Anytime the <code><a href="Classes/ConnectButton.html">ConnectButton</a></code> is tapped, it will start connecting with the Civic application and display a loading indicator on the button. The loading indicator will disappear once the session has received either an error or success response.</p>
<h4 id='errors' class='heading'>Errors</h4>

<p>The following table shows the potential errors that can occur via the library:</p>

<table><thead>
<tr>
<th>Error</th>
<th>Status Code</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>cannotFindApplicationId</td>
<td>901</td>
<td>Cannot find application ID. Make sure you have &lsquo;CivicApplicationIdentifier&rsquo; somewhere in your Info.plist.</td>
</tr>
<tr>
<td>cannotFindBundleId</td>
<td>902</td>
<td>Cannot find bundle ID. Make sure you have &lsquo;CFBundleIdentifier&rsquo; somewhere in your Info.plist.</td>
</tr>
<tr>
<td>cannotFindSecret</td>
<td>903</td>
<td>Cannot find secret. Make sure you have &lsquo;CivicSecret&rsquo; somewhere in your Info.plist.</td>
</tr>
<tr>
<td>redirectSchemeMismatch</td>
<td>904</td>
<td>Cannot find a matching URL scheme for &lsquo;CivicRedirectScheme&rsquo;. Please ensure &lsquo;CivicRedirectScheme&rsquo; matches one of the &lsquo;CFBundleURLTypes&rsquo; &lsquo;CFBundleURLSchemes&rsquo;.</td>
</tr>
<tr>
<td>cannotParseResponse</td>
<td>911</td>
<td>Cannot parse response from server.</td>
</tr>
<tr>
<td>cannotParseResponseData</td>
<td>912</td>
<td>Cannot parse response data from server.</td>
</tr>
<tr>
<td>invalidUrl</td>
<td>913</td>
<td>Invalid url.</td>
</tr>
<tr>
<td>invalidRequest</td>
<td>914</td>
<td>Invalid request.</td>
</tr>
<tr>
<td>invalidSession</td>
<td>921</td>
<td>Invalid session.</td>
</tr>
<tr>
<td>mobileUpgrade</td>
<td>922</td>
<td>Mobile upgrade required.</td>
</tr>
<tr>
<td>userCancelled</td>
<td>923</td>
<td>User cancelled scope request.</td>
</tr>
<tr>
<td>verifyError</td>
<td>924</td>
<td>Error occurred during verification.</td>
</tr>
<tr>
<td>userDataNotAvailable</td>
<td>202</td>
<td>User data is still not available. Try poll again later.</td>
</tr>
<tr>
<td>scopeRequestTimeOut</td>
<td>925</td>
<td>Scope request timed out.</td>
</tr>
<tr>
<td>verificationFailed</td>
<td>931</td>
<td>Failed to verify the response.</td>
</tr>
<tr>
<td>decryptionFailed</td>
<td>932</td>
<td>Failed to decrypt response data.</td>
</tr>
<tr>
<td>decodingFailed</td>
<td>997</td>
<td>Failed to decode the json to an object.</td>
</tr>
<tr>
<td>authenticationUnknownError</td>
<td>998</td>
<td>Unknown authentication error.</td>
</tr>
<tr>
<td>unknown</td>
<td>999</td>
<td>Unknown error.</td>
</tr>
</tbody></table>

<p>The following table shows the potential errors that can occur via the server api:</p>

<table><thead>
<tr>
<th>Error</th>
<th>Status Code</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>badRequest</td>
<td>400</td>
<td>Check the response ‘message’ field for details.</td>
</tr>
<tr>
<td>unauthorized</td>
<td>401</td>
<td>Authentication failed.</td>
</tr>
<tr>
<td>methodNotAllowed</td>
<td>405</td>
<td>You tried to access an invalid method.</td>
</tr>
<tr>
<td>insufficientFunds</td>
<td>409</td>
<td>Unauthorized: Insufficient funds.</td>
</tr>
<tr>
<td>tooManyRequests</td>
<td>429</td>
<td>Your request was throttled by our gateway.</td>
</tr>
<tr>
<td>internalServer</td>
<td>500</td>
<td>We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>timeOut</td>
<td>504</td>
<td>Endpoint Request Timed-out Exception.</td>
</tr>
</tbody></table>
<h2 id='faq' class='heading'>FAQ</h2>
<h3 id='what-do-we-use-for-the-redirect-scheme' class='heading'>What do we use for the redirect scheme?</h3>

<p>You can use any unique scheme that is valid for your app.</p>
<h3 id='how-do-we-get-the-code-uiimage-code-from-the-code-userinfo-code' class='heading'>How do we get the <code>UIImage</code> from the <code><a href="Classes/UserInfo.html">UserInfo</a></code>?</h3>

<p>Some <code><a href="Classes/UserInfo.html">UserInfo</a></code> objects have a value encoded in base 64, an example would be for the <code>documents.genericId.image</code> <code><a href="Classes/UserInfo.html">UserInfo</a></code> object, we would decode to an <code>UIImage</code> with the following code snippet:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">decodeBase64ToImage</span><span class="p">(</span><span class="n">_</span> <span class="nv">userInfo</span><span class="p">:</span> <span class="kt">UserInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIImage</span><span class="p">?</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">base64Encoded</span><span class="p">:</span> <span class="n">userInfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="n">ignoreUnknownCharacters</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='what-does-it-mean-when-i-get-code-unauthorized-no-platforms-found-for-provided-app_id-code' class='heading'>What does it mean when I get <code>Unauthorized: no platforms found for provided app_id</code>?</h3>

<p>It means you have supplied the incorrect Application Identifier. Please ensure you have the correct App ID from the <a href="https://integrate.civic.com/login">Integration Portal</a> under the configured application.</p>
<h3 id='what-does-it-mean-when-i-get-code-unauthorized-mobileid-not-found-in-partner-platform-list-code' class='heading'>What does it mean when I get <code>Unauthorized: mobileId not found in partner platform list</code>?</h3>

<p>It means you have not supplied the correct Bundle ID or have not configured your mobile application on the <a href="https://integrate.civic.com/login">Integration Portal</a>.</p>
<h2 id='author' class='heading'>Author</h2>

<p>See also the list of <a href="https://github.com/civicteam/ios-civic-connect/contributors">contributors</a> who participated in this project.</p>
<h2 id='contribution' class='heading'>Contribution</h2>

<p>Find contributing guidelines in the <a href="CONTRIBUTING.md">CONTRIBUTING</a> file.</p>
<h2 id='license' class='heading'>License</h2>

<p>CivicConnect is available under the MIT license. See the <a href="LICENSE.md">LICENSE</a> file for more info.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2018 <a class="link" href="https://civic.com/" target="_blank" rel="external">Civic Technologies</a>. All rights reserved. (Last updated: 2018-11-06)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
